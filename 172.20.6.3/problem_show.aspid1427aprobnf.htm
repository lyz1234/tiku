<!doctype html public "-//w3c//dtd html 4.01 transitional//en" "http://www.w3.org/tr/html4/loose.dtd"><HTML>
<!-- saved from url=(0051)http://172.20.6.3/Problem_Show.asp?ID=1427&a=ProbNF -->
<SCRIPT language="JavaScript">
<!--
  function CatchJavaScriptErrors() {return true;}
  window.onerror = CatchJavaScriptErrors;
//-->
</SCRIPT>

<html>
<head>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<title>Oj - vijos - P1427</title>
<Meta http-equiv="Content-Type"      Content="text/html; charset=gb2312">
<Meta http-equiv="Pragma"            Content="No-cach">
<Meta name="Kyewords"                Content="Vijos,高效信息学在线评测系统,Velocious Informatics Judge Online System,Vivian Utopia,Viviworks,信息学,评测,OJ">
<Meta name="Description"             Content="Vijos,高效信息学在线评测系统,Velocious Informatics Judge Online System,Vivian Utopia,Viviworks,信息学,评测,OJ">
<Meta name="Robots"                  Content="All">
<Meta name="Author"                  Content="cp1305@163.com">
<Meta name="Copyright"               Content="Copyright Vijos (c) 2005. www.Vijos.cn Powered by Vivian Snow">
<Meta name="Generator "              Content="Dreamweaver,Visual Studio .net 2003">
<link href="skin/vijos%20black/style.css" rel="stylesheet" type="text/css">

<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<script language="javascript">
window.status="欢迎访问OJ!";
</script>
</head>
<body>
<div align="center">  
  <table width="750" border="0" cellpadding="0" cellspacing="0">
    <tr>
      <td colspan="2" align="center"><img src="skin/vijos%20black/haed.gif" width="750" height="70" border="0" usemap="#MapHead"></a><map name="MapHead" id="MapHead"><area shape="rect" coords="71,1,153,21" href="skin.asp.htm" alt="点击这里更换您喜欢的皮肤" /><area shape="rect" coords="0,0,750,70"  alt="首页" /></map></td>
    </tr>
	
    <tr>
      <td height="25" align="right" bgcolor="#525252">
	  <font class="styletext">
	  
	  请点击<a href="default.htm"><font color="#FFFFFF"><b>这里</b></font></a>登入
	  
	  </font>&nbsp;<a href="default.htm"><font class="style3">首页</font></a>
	  <a href="core.asp.htm"><font class="style3">站务</font></a>
	  <a href="news.asp.htm"><font class="style3">公告</font></a> 
<a href="problem_data.asp.htm"><font class="style3">数据</a></font>
	  <font class="style3">|</font> <a href="problem.asp.htm"><font class="style3">题库</font></a>
	  <a href="categories.asp.htm"><font class="style3">分类</font></a>
	  <a href="record.asp.htm"><font class="style3">记录</font></a>
	  <a href="test.asp.htm"><font class="style3">测试</font></a>
	  <a href="rank.asp.htm"><font class="style3">排名</font></a>
	  <a href="group.asp.htm"><font class="style3">团队</font></a>
	  <a href="discuss.asp.htm"><font class="style3">讨论</font></a> <font class="style3">| </font><a href="skin.asp.htm"><font class="style3">换肤</font></a><font class="style3">|</font><a href="logout.asp"><font class="style3">登入</font></a><a href="reg_state.asp.htm"><font class="style3">注册</font></a>
	  </td>
      <td align="center" bgcolor="#525252">&nbsp;</td>
    </tr>

    <tr>
      <td colspan="2" height="5" bgcolor="#5B5B5B"></td>
    </tr>
	<tr>
      <td colspan="2" align="center" bgcolor="#5B5B5B">
	  
	  
	  <table height="0" border="0" cellpadding="0" cellspacing="0" bgcolor="#FFFFFF">
        <tr>
          <td width="14" height="14" background="skin/vijos%20black/frame_r1_c1.gif"></td>
          <td background="skin/vijos%20black/frame_r1_c2.gif"></td>
          <td width="14" height="14" background="skin/vijos%20black/frame_r1_c3.gif"></td>
        </tr>
        <tr>
          <td background="skin/vijos%20black/frame_r2_c1.gif"></td>
          <td width="712" align="left" valign="middle">
		  <marquee align="right" direction="left" scrollamount="4" onMouseOver="this.stop();" onMouseOut="this.start();">
		  <font color="#003366"><b>公告 News &gt;&gt;</b></font>
		  
		  　　<a href="news.asp.htm#12"><font color="#006699"><b>题库第5页是历年noip原题</b> (2012-3-5 17:19:20)</font></a>
		  
		  　　<a href="news.asp.htm#10"><font color="#006699"><b>第一次wa意味这道题的锻炼机会失去了。</b> (2012-2-15 16:35:47)</font></a>
		  
		  　　<a href="news.asp.htm#7"><font color="#006699"><b>程序设计=算法+数据结构</b> (2011-12-4 23:42:52)</font></a>
		  
		  　　<a href="news.asp.htm#6"><font color="#006699"><b>c++ = c plus plus = cpp</b> (2011-11-28 11:12:24)</font></a>
		  
		  　　<a href="news.asp.htm#1"><font color="#006699"><b>oj重新开张，注册须知，否则封号。</b> (2002-1-1 21:41:45)</font></a>
		  
		  </marquee>
		  </td>
          <td background="skin/vijos%20black/frame_r2_c3.gif"></td>
        </tr>
        <tr>
          <td width="14" height="14" background="skin/vijos%20black/frame_r3_c1.gif"></td>
          <td background="skin/vijos%20black/frame_r3_c2.gif"></td>
          <td width="14" height="14" background="skin/vijos%20black/frame_r3_c3.gif"></td>
        </tr>
      </table>
	  <hr>
	  </td>
    </tr>
  <table width="750" border="0" cellpadding="0" cellspacing="0">
	<tr>
      <td colspan="2" align="center" bgcolor="#5B5B5B">
<script>
document.title=document.title+" -  [NOIP2011提高组day1]-3-mayan游戏"
</script>
<table height="0" border="0" cellpadding="0" cellspacing="0" bgcolor="#FFFFFF">
  <tr>
    <td width="14" height="14" background="skin/vijos%20black/frame_r1_c1.gif"></td>
    <td background="skin/vijos%20black/frame_r1_c2.gif"></td>
    <td width="14" height="14" background="skin/vijos%20black/frame_r1_c3.gif"></td>
  </tr>
  <tr>
    <td background="skin/vijos%20black/frame_r2_c1.gif"></td>
    <td width="712" align="left" valign="top"><table border="0" align="right" cellpadding="0" cellspacing="0">
      <tr>
        <td><span style="font-weight: bold">From</span> <a href="user_show.aspid10625.htm">easthong</a></td>
      </tr>
    </table>      <font size="5"><a href="problem_show.aspid1427aprobnf.htm" alt="点击可标记为空星">★</a></font><a href="problem_show.aspid1427.htm"><font class="style1"> [NOIP2011提高组day1]-3-mayan游戏</font></a></td>
    <td background="skin/vijos%20black/frame_r2_c3.gif"></td>
  </tr>
  <tr>
    <td width="14" height="14" background="skin/vijos%20black/frame_r3_c1.gif"></td>
    <td background="skin/vijos%20black/frame_r3_c2.gif"></td>
    <td width="14" height="14" background="skin/vijos%20black/frame_r3_c3.gif"></td>
  </tr>
</table>
<table width="740" border="0" cellpadding="0" cellspacing="0">
  <tr>
    <td width="540" valign="top">

      <table height="0" border="0" cellpadding="0" cellspacing="0" bgcolor="#FFFFFF">
        <tr>
          <td width="14" height="14" background="skin/vijos%20black/frame_r1_c1.gif"></td>
          <td colspan="2" background="skin/vijos%20black/frame_r1_c2.gif"></td>
          <td width="14" height="14" background="skin/vijos%20black/frame_r1_c3.gif"></td>
        </tr>
        <tr>
          <td rowspan="2" background="skin/vijos%20black/frame_r2_c1.gif"></td>
          <td width="512" height="20" colspan="2" align="left" valign="top" class="style2">描述 Description </td>
          <td rowspan="2" background="skin/vijos%20black/frame_r2_c3.gif"></td>
        </tr>
        <tr>
          <td width="10" align="left" valign="top">&nbsp;
		  </td>
          <td width="502" align="left" valign="top">                3．Mayan 游戏 <br>
(mayan.cpp/c/pas) <br>
【问题描述】 <br>
Mayan puzzle 是最近流行起来的一个游戏。游戏界面是一个 7行 5 列的棋盘，上面堆放<br>
着一些方块，方块不能悬空堆放，即方块必须放在最下面一行，或者放在其他方块之上。游<br>
戏通关是指在规定的步数内消除所有的方块，消除方块的规则如下： <br>
1、 &nbsp;每步移动可以且仅可以沿横向（即向左或向右）拖动某一方块一格：当拖动这一方<br>
块时，如果拖动后到达的位置（以下称目标位置）也有方块，那么这两个方块将交换位置（参<br>
见输入输出样例说明中的图 6 到图 7）；如果目标位置上没有方块，那么被拖动的方块将从<br>
原来的竖列中抽出，并从目标位置上掉落（直到不悬空，参见下面图 1 和图2）；<br>
<br>
<a href="about:<img src=./problemImg/noip201102.jpg border=0>" target=_blank><img src=problemimg/noip201102.jpg vspace=2 hspace=2 border=0 alt=::点击图片在新窗口中打开::></a><br>
<br>
2、 &nbsp;任一时刻，如果在一横行或者竖列上有连续三个或者三个以上相同颜色的方块，则<br>
们将立即被消除（参见图 1 到图3）。 <br>
注意： <br>
a) &nbsp;如果同时有多组方块满足消除条件，几组方块会同时被消除（例如下面图 4，三个颜<br>
为 1 的方块和三个颜色为 2 的方块会同时被消除，最后剩下一个颜色为 2 的方块）。 <br>
b) &nbsp;当出现行和列都满足消除条件且行列共享某个方块时，行和列上满足消除条件的所<br>
方块会被同时消除（例如下面图 5 所示的情形，5 个方块会同时被消除）。 <br>
<br>
<a href="about:<img src=./problemImg/noip201103.jpg border=0>" target=_blank><img src=problemimg/noip201103.jpg vspace=2 hspace=2 border=0 alt=::点击图片在新窗口中打开::></a><br>
 &nbsp;<br>
3、 &nbsp;方块消除之后，消除位置之上的方块将掉落，掉落后可能会引起新的方块消除。注<br>
意：掉落的过程中将不会有方块的消除。 <br>
上面图 1 到图 3 给出了在棋盘上移动一块方块之后棋盘的变化。棋盘的左下角方块的坐<br>
标为（0, 0），将位于（3, 3）的方块向左移动之后，游戏界面从图 1 变成图 2 所示的状态，<br>
此时在一竖列上有连续三块颜色为 4 的方块，满足消除条件，消除连续 3块颜色为 4的方块<br>
后，上方的颜色为 3 的方块掉落，形成图 3 所示的局面。 <br>
　　　　 &nbsp;<br>
【输入】 <br>
输入文件 mayan.in，共 6行。 <br>
第一行为一个正整数 n，表示要求游戏通关的步数。 <br>
接下来的 5行，描述 7*5 的游戏界面。每行若干个整数，每两个整数之间用一个空格隔<br>
开，每行以一个 0 结束，自下向上表示每竖列方块的颜色编号（颜色不多于 10 种，从 1 开<br>
始顺序编号，相同数字表示相同颜色）。 <br>
输入数据保证初始棋盘中没有可以消除的方块。 <br>
<br>
【输出】 <br>
 输出文件名为 mayan.out。 &nbsp; <br>
 如果有解决方案，输出 n 行，每行包含 3 个整数x，y，g，表示一次移动，每两个整数<br>
之间用一个空格隔开，其中（x，y）表示要移动的方块的坐标，g 表示移动的方向，1 表示<br>
向右移动，-1 表示向左移动。注意：多组解时，按照 x 为第一关健字，y 为第二关健字，1<br>
优先于-1，给出一组字典序最小的解。游戏界面左下角的坐标为（0，0）。 <br>
 如果没有解决方案，输出一行，包含一个整数-1。 <br>
【输入输出样例 1】 <br>
mayan.in<br>
3 <br>
1 0 <br>
2 1 0<br>
2 3 4 0 <br>
3 1 0 <br>
2 4 3 4 0 <br>
mayan.out <br>
2 1 1 <br>
3 1 1 <br>
3 0 1 <br>
<br>
【输入输出样例说明】 <br>
按箭头方向的顺序分别为图 6 到图11 <br>
<br>
<a href="about:<img src=./problemImg/noip201104.jpg border=0>" target=_blank><img src=problemimg/noip201104.jpg vspace=2 hspace=2 border=0 alt=::点击图片在新窗口中打开::></a><br>
 &nbsp;<br>
样例输入的游戏局面如上面第一个图片所示，依次移动的三步是：（2，1）处的方格向<br>
右移动，（3，1）处的方格向右移动，（3，0）处的方格向右移动，最后可以将棋盘上所有方<br>
块消除。 <br>
【数据范围】 <br>
对于 30%的数据，初始棋盘上的方块都在棋盘的最下面一行； <br>
对于 100%的数据，0 &lt; n≤5。 </td>
        </tr>
        <tr>
          <td width="14" height="14" background="skin/vijos%20black/frame_r3_c1.gif"></td>
          <td colspan="2" background="skin/vijos%20black/frame_r3_c2.gif"></td>
          <td width="14" height="14" background="skin/vijos%20black/frame_r3_c3.gif"></td>
        </tr>
      </table>
	 	 </td>
    <td width="200" valign="top"><table height="0" border="0" cellpadding="0" cellspacing="0" bgcolor="#FFFFFF">
      <tr>
        <td width="14" height="14" background="skin/vijos%20black/frame_r1_c1.gif"></td>
        <td background="skin/vijos%20black/frame_r1_c2.gif"></td>
        <td width="14" height="14" background="skin/vijos%20black/frame_r1_c3.gif"></td>
      </tr>
      <tr>
        <td background="skin/vijos%20black/frame_r2_c1.gif"></td>
        <td width="172" valign="top"><table width="100%" border="0" cellpadding="0" cellspacing="1" bgcolor="#DFDFDF">
          <tr bgcolor="#CCCCCC">
            <td height="25" bgcolor="#CCCCCC"><div align="center" class="style1">Flag</div></td>
            <td align="left" bgcolor="#F5F5F5">　　</td>
          </tr>
          <tr bgcolor="#CCCCCC">
            <td height="25" bgcolor="#CCCCCC"><div align="center" style="font-weight: bold"><strong>题号</strong></div></td>
            <td align="left" bgcolor="#F5F5F5">　　<a href="problem_show.aspid1427.htm">P1427</a></td>
          </tr>
          <tr bgcolor="#CCCCCC">
            <td height="25" bgcolor="#CCCCCC"><div align="center" style="font-weight: bold"><strong><a href="#" title="请用鼠标拖动选择单元格中的文字即可显示类别">类型<span style="font-size: 9px">(?)</span></a></strong></div></td>
            <td align="left" bgcolor="#F5F5F5">　　<span style="color: #F5F5F5">其它</span></td>
          </tr>
          <tr bgcolor="#CCCCCC">
            <td height="25" bgcolor="#CCCCCC"><div align="center" style="font-weight: bold"><strong>通过</strong></div></td>
            <td align="left" bgcolor="#F5F5F5">　　<a href="problem_listok.aspid1427.htm">1人</a></td>
          </tr>
          <tr bgcolor="#CCCCCC">
            <td height="25" bgcolor="#CCCCCC"><div align="center" style="font-weight: bold"><strong>提交</strong></div></td>
            <td align="left" bgcolor="#F5F5F5">　　6次</td>
          </tr>
          <tr bgcolor="#CCCCCC">
            <td height="25" bgcolor="#CCCCCC"><div align="center" style="font-weight: bold"><strong>通过率</strong></div></td>
            <td align="left" bgcolor="#F5F5F5">　　17%</td>
          </tr>
          <tr bgcolor="#CCCCCC">
            <td width="60" height="25" bgcolor="#CCCCCC"><div align="center" style="font-weight: bold"><strong>难度</strong></div></td>
            <td width="109" align="left" bgcolor="#F5F5F5">　　1</td>
            </tr>
        </table></td>
        <td background="skin/vijos%20black/frame_r2_c3.gif"></td>
      </tr>
      <tr>
        <td width="14" height="14" background="skin/vijos%20black/frame_r3_c1.gif"></td>
        <td background="skin/vijos%20black/frame_r3_c2.gif"></td>
        <td width="14" height="14" background="skin/vijos%20black/frame_r3_c3.gif"></td>
      </tr>
    </table>
      <table height="0" border="0" cellpadding="0" cellspacing="0" bgcolor="#FFFFFF">
        <tr>
          <td width="14" height="14" background="skin/vijos%20black/frame_r1_c1.gif"></td>
          <td background="skin/vijos%20black/frame_r1_c2.gif"></td>
          <td width="14" height="14" background="skin/vijos%20black/frame_r1_c3.gif"></td>
        </tr>
        <tr>
          <td background="skin/vijos%20black/frame_r2_c1.gif"></td>
          <td width="172" valign="top"><table width="100%" height="25" border="0" cellpadding="0" cellspacing="0" bgcolor="#000000">
            <tr align="center">
              <td><span style="font-weight: bold"><a href="index.asp.htm">提交</a></span></td>
              <td><span style="font-weight: bold"><a href="problem_discuss.aspid1427.htm">讨论</a></span></td>
              <td><span style="font-weight: bold"><a href="index.asp.htm">题解</a></span></td>
              <td><span style="font-weight: bold"><a href="problem_data_list.aspid1427.htm">数据</a></span></td>
            </tr>
          </table></td>
          <td background="skin/vijos%20black/frame_r2_c3.gif"></td>
        </tr>
        <tr>
          <td width="14" height="14" background="skin/vijos%20black/frame_r3_c1.gif"></td>
          <td background="skin/vijos%20black/frame_r3_c2.gif"></td>
          <td width="14" height="14" background="skin/vijos%20black/frame_r3_c3.gif"></td>
        </tr>
      </table></td>
  </tr>
</table>
	  </td>
    </tr>
    <tr>
      <td colspan="2" height="5" bgcolor="#5B5B5B"></td>
    </tr>

    <tr>
      <td colspan="2" height="5" bgcolor="#424242"></td>
    </tr>
      </table>
	  
  <table width="750" border="0" cellpadding="0" cellspacing="0">
    <tr>
      <td colspan="2" align="center" height="50">
		<table width="100%" border="0" cellspacing="0" cellpadding="0">
		  <tr>
			<td align="left" valign="top">
			  　Copyright &copy; 2011-2011. Vijos 高效信息学在线评测系统</a>
			  <script type="text/javascript" src="../js.tongji.linezing.com/1097391/tongji.js"></script><noscript><a href="../www.linezing.com/default.htm"></a></noscript>　<a href="help.asp.htm"><strong>帮助</strong></a><br />
		    　<span style="font-size: 9px">Tyvj Information ---- <a href="rank.asp.htm">Total Users : 227</a> | <a href="online.asp.htm">Online Users / Processes : 71 / 401</a> | Processed Time : 16 ms | Server Time : 2014-1-21 17:52:21</span>		</td>
			<td width="60" valign="top"></td>
		  </tr>
		</table>
	  </td>
    </tr>
  </table>

<style>
#UserShowInfo {
	position:absolute;
	left:0;
	top:0;
	width:100%;
	height:68px;
	z-index:100;
	cursor: hand;
	filter: Alpha(Opacity=10, FinishOpacity=20, Style=1, StartX=0, StartY=0, FinishX=0, FinishY=70);
}
</style>

<div id="UserShowInfo">
    <div align="center">
    <table width="440" border="0" cellpadding="0" cellspacing="0">
      <tr>
        <td height="2">
		</td>
	  </tr>
      <tr>
        <td>
	  
		<table  width="0" border="0" align="left" cellpadding="0" cellspacing="1" bgcolor="#CCCCCC">
          <tr>
            <td><table width="100%" border="0" align="left" cellpadding="5" cellspacing="0" bgcolor="#FFFFFF">
              <tr>
                <td width="48" rowspan="2"><img src="face/face1.gif" width="48" height="48"></td>
                <td><div align="center"><a href="user_show.aspid1.htm" title="U1 - 通过0题 - Guest - 无 - 首页"><font color="#666666"><strong>Tyvj Guest</strong></font></a></div></td>
              </tr>
              <tr>
                <td bordercolor="" dir=""><div align="center"><img src="face/stars0.gif" width="64" height="12"><img src="img/sex_0.gif" width="10" height="12" /></div></td>
              </tr>
              
            </table></td>
          </tr>
        </table>
</td>
      </tr>
    </table>
	</div>
</div>

</body>
</html>
