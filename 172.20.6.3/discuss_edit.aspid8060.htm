<!doctype html public "-//w3c//dtd html 4.01 transitional//en" "http://www.w3.org/tr/html4/loose.dtd"><HTML>
<!-- saved from url=(0042)http://172.20.6.3/Discuss_Edit.asp?id=8060 -->
<SCRIPT language="JavaScript">
<!--
  function CatchJavaScriptErrors() {return true;}
  window.onerror = CatchJavaScriptErrors;
//-->
</SCRIPT>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<meta http-equiv="Content-Language" content="zh-cn">
<style type="text/css">
.style1 {
				text-align: right;
}
</style>
</head>


<html>
<head>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<title>Oj - vijos - 讨论</title>
<Meta http-equiv="Content-Type"      Content="text/html; charset=gb2312">
<Meta http-equiv="Pragma"            Content="No-cach">
<Meta name="Kyewords"                Content="Vijos,高效信息学在线评测系统,Velocious Informatics Judge Online System,Vivian Utopia,Viviworks,信息学,评测,OJ">
<Meta name="Description"             Content="Vijos,高效信息学在线评测系统,Velocious Informatics Judge Online System,Vivian Utopia,Viviworks,信息学,评测,OJ">
<Meta name="Robots"                  Content="All">
<Meta name="Author"                  Content="cp1305@163.com">
<Meta name="Copyright"               Content="Copyright Vijos (c) 2005. www.Vijos.cn Powered by Vivian Snow">
<Meta name="Generator "              Content="Dreamweaver,Visual Studio .net 2003">
<link href="skin/vijos%20black/style.css" rel="stylesheet" type="text/css">

<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<script language="javascript">
window.status="欢迎访问OJ!";
</script>
</head>
<body>
<div align="center">  
  <table width="750" border="0" cellpadding="0" cellspacing="0">
    <tr>
      <td colspan="2" align="center"><img src="skin/vijos%20black/haed.gif" width="750" height="70" border="0" usemap="#MapHead"></a><map name="MapHead" id="MapHead"><area shape="rect" coords="71,1,153,21" href="skin.asp.htm" alt="点击这里更换您喜欢的皮肤" /><area shape="rect" coords="0,0,750,70"  alt="首页" /></map></td>
    </tr>
	
    <tr>
      <td height="25" align="right" bgcolor="#525252">
	  <font class="styletext">
	  提交 203 / 277  题 (73%)
	  
	  </font>&nbsp;<a href="default.htm"><font class="style3">首页</font></a>
	  <a href="core.asp.htm"><font class="style3">站务</font></a>
	  <a href="news.asp.htm"><font class="style3">公告</font></a> 
<a href="problem_data.asp.htm"><font class="style3">数据</a></font>
	  <font class="style3">|</font> <a href="problem.asp.htm"><font class="style3">题库</font></a>
	  <a href="categories.asp.htm"><font class="style3">分类</font></a>
	  <a href="record.asp.htm"><font class="style3">记录</font></a>
	  <a href="test.asp.htm"><font class="style3">测试</font></a>
	  <a href="rank.asp.htm"><font class="style3">排名</font></a>
	  <a href="group.asp.htm"><font class="style3">团队</font></a>
	  <a href="discuss.asp.htm"><font class="style3">讨论</font></a> <font class="style3">| </font><a href="uspace.asp.htm"><font class="style3">User Space</font></a> <a href="skin.asp.htm"><font class="style3">换肤</font></a><font class="style3">|</font><a href="logout.asp"><font class="style3">登出</font></a>
	  </td>
      <td align="center" bgcolor="#525252">&nbsp;</td>
    </tr>

    <tr>
      <td colspan="2" height="5" bgcolor="#5B5B5B"></td>
    </tr>
	<tr>
      <td colspan="2" align="center" bgcolor="#5B5B5B">
	  
	  
	  <table height="0" border="0" cellpadding="0" cellspacing="0" bgcolor="#FFFFFF">
        <tr>
          <td width="14" height="14" background="skin/vijos%20black/frame_r1_c1.gif"></td>
          <td background="skin/vijos%20black/frame_r1_c2.gif"></td>
          <td width="14" height="14" background="skin/vijos%20black/frame_r1_c3.gif"></td>
        </tr>
        <tr>
          <td background="skin/vijos%20black/frame_r2_c1.gif"></td>
          <td width="712" align="left" valign="middle">
		  <marquee align="right" direction="left" scrollamount="4" onMouseOver="this.stop();" onMouseOut="this.start();">
		  <font color="#003366"><b>公告 News &gt;&gt;</b></font>
		  
		  　　<a href="news.asp.htm#12"><font color="#006699"><b>题库第5页是历年noip原题</b> (2012-3-5 17:19:20)</font></a>
		  
		  　　<a href="news.asp.htm#10"><font color="#006699"><b>第一次wa意味这道题的锻炼机会失去了。</b> (2012-2-15 16:35:47)</font></a>
		  
		  　　<a href="news.asp.htm#7"><font color="#006699"><b>程序设计=算法+数据结构</b> (2011-12-4 23:42:52)</font></a>
		  
		  　　<a href="news.asp.htm#6"><font color="#006699"><b>c++ = c plus plus = cpp</b> (2011-11-28 11:12:24)</font></a>
		  
		  　　<a href="news.asp.htm#1"><font color="#006699"><b>oj重新开张，注册须知，否则封号。</b> (2002-1-1 21:41:45)</font></a>
		  
		  </marquee>
		  </td>
          <td background="skin/vijos%20black/frame_r2_c3.gif"></td>
        </tr>
        <tr>
          <td width="14" height="14" background="skin/vijos%20black/frame_r3_c1.gif"></td>
          <td background="skin/vijos%20black/frame_r3_c2.gif"></td>
          <td width="14" height="14" background="skin/vijos%20black/frame_r3_c3.gif"></td>
        </tr>
      </table>
	  <hr>
	  </td>
    </tr>
  <table width="750" border="0" cellpadding="0" cellspacing="0">
	<tr>
      <td colspan="2" align="center" bgcolor="#5B5B5B">
        <table height="0" border="0" cellpadding="0" cellspacing="0" bgcolor="#FFFFFF">
          <tr>
            <td width="14" height="14" background="skin/vijos%20black/frame_r1_c1.gif"></td>
            <td colspan="2" background="skin/vijos%20black/frame_r1_c2.gif"></td>
            <td width="14" height="14" background="skin/vijos%20black/frame_r1_c3.gif"></td>
          </tr>
          <tr>
            <td background="skin/vijos%20black/frame_r2_c1.gif"></td>
            <td width="712" colspan="2" align="center" valign="top"><form name="form1" method="post" action="Discuss_Edit_Submit.asp?ID=8060&RootID=0">
                <table width="100%" border="0" cellpadding="10" cellspacing="0">
                  <tr>
                    <td width="60" align="right"><strong>
                      *
                    标　题</strong></td>
                    <td align="left"><input name="Title" type="text" id="Username2" size="40" maxlength="40" value="来自网上的骗分！"></td>
                  </tr>
                  <tr>
                    <td align="right"><strong>*表　情</strong></td>
                    <td align="left"><input name="Face" type="radio" value="1"checked>
                        <img src="face/icon1.gif" width="16" height="16">
                        <input type="radio" name="Face" value="2">
                      <img src="face/icon2.gif" width="16" height="16">
                        <input type="radio" name="Face" value="3">
                      <img src="face/icon3.gif" width="16" height="16">
                        <input type="radio" name="Face" value="4">
                      <img src="face/icon4.gif" width="16" height="16">
                        <input type="radio" name="Face" value="5">
                      <img src="face/icon5.gif" width="16" height="16">
                        <input type="radio" name="Face" value="6">
                      <img src="face/icon6.gif" width="16" height="16">
                        <input type="radio" name="Face" value="7">
                      <img src="face/icon7.gif" width="16" height="16">
                        <input type="radio" name="Face" value="8">
                      <img src="face/icon8.gif" width="16" height="16">
                        <input type="radio" name="Face" value="9">
                      <img src="face/icon9.gif" width="16" height="16"> </td>
                  </tr>
                </table>
              <br>
                <textarea name="Body" cols="90" rows="20" wrap="VIRTUAL" id="Body">http://www.cppblog.com/varg-vikernes/archive/2010/04/27/113708.html?opt=admin

这题能不能贪心，是很难说的。。
因为没有能什么证明贪心是对的，但也没找到什么反例。
代码写出来，WA了。
但总觉得是对的，因为吗的实在找不到反例。
结果找到数据测了下，果然十个过了九个。。
你看，如果这是NOIP，跟满分都没啥区别的对吧。我已经满足了。。
没过的那组，比较大，肉眼看不出是啥问题。
想了下，给排序加多了一个判断，然后那组数据就过了。。
然后提交，吗的还上榜了。。无语。

这样做比较无耻，网上有人说用最大流做，不理解。下次想一想。

思路：
如果牛喜欢的种类个数小于 K，那这种牛是无法满足的。。
把牛按照喜欢的种类个数排序，先处理小的。
就是用组合数枚举每一种可能的 pizza 情况。
用 hash 保存这些情况。



#include <stdio.h>
#include <stdlib.h>

#define HASH_SIZE 65536

struct cow_node {
    int val, cnt;
};

int C, T, K, ans;
struct cow_node cows[1024];
int hash[HASH_SIZE];

int cmp(const void *a, const void *b)
{
    if (((struct cow_node *)a)->cnt == ((struct cow_node *)b)->cnt)
        return ((struct cow_node *)a)->val - ((struct cow_node *)b)->val;
    return ((struct cow_node *)a)->cnt - ((struct cow_node *)b)->cnt;
}

inline int insert(int val)
{
    int i, h;

    h = val & (HASH_SIZE - 1);
    for (i = h + 1; i != h && hash[i] && hash[i] != val; )
        i = (i + 1) & (HASH_SIZE - 1);
    if (i == h || hash[i] == val)
        return 0;
    hash[i] = val;
    return 1;
}

inline int calc(struct cow_node *t)
{
    int arr[32], map[32], i, j, val;

    for (i = j = 0; i < 32; i++)
        if (t->val & (1 << i))
            map[j++] = (1 << i);
    for (i = 0; i < K; i++)
        arr[i] = i;
    while (1) {
        val = 0;
        for (i = 0; i < K; i++)
            val |= map[arr[i]];
        if (insert(val))
            return 1;
        for (i = K - 1; i >= 0 && arr[i] == i + t->cnt - K; i--);
        if (i < 0)
            break;
        arr[i]++;
        for (i++; i < K; i++)
            arr[i] = arr[i - 1] + 1;
    }

    return 0;
}

int main()
{
    int i, j, k;

    freopen("e:\\test\\in.txt", "r", stdin);

    scanf("%d%d%d", &C, &T, &K);
    for (i = 0; i < C; i++) {
        scanf("%d", &cows[i].cnt);
        cows[i].val = 0;
        for (j = 0; j < cows[i].cnt; j++) {
            scanf("%d", &k);
            k--;
            cows[i].val |= 1 << k;
        }
        if (cows[i].cnt < K) {
            i--; C--;
            continue;
        }
    }
    qsort(cows, C, sizeof(cows[0]), cmp);

    for (i = 0; i < C; i++) 
        ans += calc(&cows[i]);
    printf("%d\n", ans);

    return 0;
}
</textarea>
                <br>
                <table width="100%" border="0" cellpadding="10" cellspacing="0">
								<tr>
												<td width="60" align="right"><strong>*验证码</strong></td>
                                                <td align="left"><input name="GetCode" type="text" id="Password" size="4" maxlength="4"><img src="getcode.asp.htm" onclick="this.src = 'getcode.asprandomnum.htm' + Math.random();" alt="看不清?点击更换!"/></td>
								</tr>
				</table>
                <br>
                <input type="submit" name="Submit" value="发布">
              
              <input type="reset" name="Submit2" value="重置">
            </form></td>
            <td background="skin/vijos%20black/frame_r2_c3.gif"></td>
          </tr>
          <tr>
            <td width="14" height="14" background="skin/vijos%20black/frame_r3_c1.gif"></td>
            <td colspan="2" background="skin/vijos%20black/frame_r3_c2.gif"></td>
            <td width="14" height="14" background="skin/vijos%20black/frame_r3_c3.gif"></td>
          </tr>
        </table>
        	  </td>
    </tr>
    <tr>
      <td colspan="2" height="5" bgcolor="#5B5B5B"></td>
    </tr>

    <tr>
      <td height="25" align="right" bgcolor="#525252"><font color=white><strong>系统管理</strong></font>　<a href="news_insert.asp.htm"><font class="style3">添加公告</font></a> <a href="group_insert.asp.htm"><font class="style3">添加团队</font></a> <a href="problemtmp.asp.htm"><font class="style3">审核题库</font></a> <a href="solvetmp.asp.htm"><font class="style3">审核题解</font></a> <a href="problem_insert.asp.htm"><font class="style3">添加题目</font></a> <a href="problem_edit.aspid1098.htm"><font class="style3">修改题目</font></a> <a href="problem_delete.aspid1098"><font class="style3">删除题目</font></a> <a href="test_insert.asp.htm"><font class="style3">添加测试</font></a> <a href="index.asp.htm"><font class="style3">修改测试</font></a> <a href="test_delete.aspid1000"><font class="style3">删除测试</font></a>
	  </td>
      <td align="center" bgcolor="#525252">&nbsp;</td>
    </tr>

    <tr>
      <td colspan="2" height="5" bgcolor="#424242"></td>
    </tr>
      </table>
	  
  <table width="750" border="0" cellpadding="0" cellspacing="0">
    <tr>
      <td colspan="2" align="center" height="50">
		<table width="100%" border="0" cellspacing="0" cellpadding="0">
		  <tr>
			<td align="left" valign="top">
			  　Copyright &copy; 2011-2011. Vijos 高效信息学在线评测系统</a>
			  <script type="text/javascript" src="../js.tongji.linezing.com/1097391/tongji.js"></script><noscript><a href="../www.linezing.com/default.htm"></a></noscript>　<a href="help.asp.htm"><strong>帮助</strong></a><br />
		    　<span style="font-size: 9px">Tyvj Information ---- <a href="rank.asp.htm">Total Users : 130</a> | <a href="online.asp.htm">Online Users / Processes : 7 / 48</a> | Processed Time : 8 ms | Server Time : 2012-11-7 20:50:12</span>		</td>
			<td width="60" valign="top"></td>
		  </tr>
		</table>
	  </td>
    </tr>
  </table>

<style>
#UserShowInfo {
	position:absolute;
	left:0;
	top:0;
	width:100%;
	height:68px;
	z-index:100;
	cursor: hand;
	filter: Alpha(Opacity=10, FinishOpacity=20, Style=1, StartX=0, StartY=0, FinishX=0, FinishY=70);
}
</style>

<div id="UserShowInfo">
    <div align="center">
    <table width="440" border="0" cellpadding="0" cellspacing="0">
      <tr>
        <td height="2">
		</td>
	  </tr>
      <tr>
        <td>
	  
		<table  width="0" border="0" align="left" cellpadding="0" cellspacing="1" bgcolor="#CCCCCC">
          <tr>
            <td><table width="100%" border="0" align="left" cellpadding="5" cellspacing="0" bgcolor="#FFFFFF">
              <tr>
                <td width="48" rowspan="2"><img src="face/face10.gif" width="48" height="48"></td>
                <td><div align="center"><a href="user_show.aspid10639.htm" title="U10639 - 通过203题 - Super Master - 无 - P1204"><font color="#0099CC"><strong>曲衡2013</strong></font></a></div></td>
              </tr>
              <tr>
                <td bordercolor="" dir=""><div align="center"><img src="face/stars9.gif" width="64" height="12"><img src="img/sex_0.gif" width="10" height="12" /></div></td>
              </tr>
              
            </table></td>
          </tr>
        </table>
</td>
      </tr>
    </table>
	</div>
</div>

</body>
</html>
